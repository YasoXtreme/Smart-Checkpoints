<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Smart Checkpoints â€” Project</title>
    <link rel="icon" href="/Images/favicon.ico" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/Css/project.css" />
    <link rel="stylesheet" href="/Css/cursor.css" />
    <script src="/Js/cursor.js" defer></script>
  </head>
  <body>
    <div class="custom-cursor"></div>
    <!-- Header -->
    <header id="project-header">
      <div class="header-left">
        <a href="/" class="logo">
          <img
            src="/Images/logo.png"
            alt="Smart Checkpoints"
            class="logo-img"
          />
        </a>
      </div>
      <div class="header-right">
        <a href="/documentation" class="header-link">Documentation</a>
        <a href="/admin" class="header-link">Admin</a>
      </div>
    </header>

    <!-- Canvas -->
    <canvas id="project-canvas"></canvas>

    <!-- Congestion Legend -->
    <div id="congestion-legend">
      <div class="legend-title">Traffic Density</div>
      <div class="legend-bar"></div>
      <div class="legend-labels">
        <span>Normal</span>
        <span>Delayed</span>
        <span>Severe</span>
      </div>
    </div>

    <!-- Settings Toggle Button -->
    <button id="settings-toggle">
      <svg
        id="settings-icon"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <circle cx="12" cy="12" r="3"></circle>
        <path
          d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"
        ></path>
      </svg>
    </button>

    <!-- Settings Panel -->
    <div id="settings-panel">
      <div class="settings-header">
        <h3>Map Settings</h3>
        <button id="settings-close">&times;</button>
      </div>
      <div class="settings-body">
        <label class="setting-label">API Key</label>
        <div class="api-key-row">
          <input type="text" id="api-key-input" readonly />
          <button id="copy-api-key" title="Copy Key">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
              <path
                d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"
              ></path>
            </svg>
          </button>
        </div>

        <div class="setting-item">
          <label for="scale-slider" class="setting-label"
            >Node Scale (<span id="scale-val">1.0</span>x)</label
          >
          <input
            type="range"
            id="scale-slider"
            min="1"
            max="10"
            step="0.5"
            value="1"
          />
        </div>
      </div>
    </div>

    <!-- Connection Editor Modal -->
    <div id="connection-editor" class="editor-panel hidden">
      <h3>Edit Connection</h3>
      <label>
        <span>Distance (m)</span>
        <input type="number" id="edit-distance" min="0" step="0.1" />
      </label>
      <label>
        <span>Speed Limit (km/h)</span>
        <input type="number" id="edit-speed-limit" min="0" step="1" />
      </label>
      <div class="editor-actions">
        <button id="edit-save" class="editor-btn">Save</button>
        <button id="edit-cancel" class="editor-btn editor-btn-secondary">
          Cancel
        </button>
      </div>
    </div>

    <!-- New Connection Modal -->
    <div id="new-connection-modal" class="modal-overlay hidden">
      <div class="modal">
        <button class="modal-close" id="new-conn-close">&times;</button>
        <h2>New Connection</h2>
        <p class="modal-subtitle" id="new-conn-subtitle"></p>
        <label class="modal-label">
          <span>Distance (m)</span>
          <input
            type="number"
            id="new-conn-distance"
            min="0"
            step="0.1"
            placeholder="100"
          />
        </label>
        <label class="modal-label">
          <span>Speed Limit (km/h)</span>
          <input
            type="number"
            id="new-conn-speed"
            min="0"
            step="1"
            placeholder="60"
          />
        </label>
        <button id="new-conn-submit" class="modal-btn">
          Create Connection
        </button>
      </div>
    </div>

    <!-- Violations Panel -->
    <div id="violations-panel">
      <div class="violations-header">
        <h3>Live Violations</h3>
      </div>
      <div class="violations-body">
        <table class="violations-table">
          <thead>
            <tr>
              <th>Time</th>
              <th>Plate</th>
              <th>Speed</th>
            </tr>
          </thead>
          <tbody id="violations-tbody"></tbody>
        </table>
        <div id="violations-empty" class="violations-empty">
          No violations recorded yet
        </div>
      </div>
    </div>

    <!-- Violations Toggle Button -->
    <button id="violations-toggle">
      <div class="toggle-icon">
        <div class="bar">
          <span class="dot"></span><span class="line"></span>
        </div>
        <div class="bar">
          <span class="dot"></span><span class="line"></span>
        </div>
        <div class="bar">
          <span class="dot"></span><span class="line"></span>
        </div>
      </div>
    </button>

    <script src="/socket.io/socket.io.js"></script>
    <script src="/Js/project.js"></script>
  </body>
</html>
